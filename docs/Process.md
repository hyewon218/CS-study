# 프로세스

## 프로세스 

- 컴퓨터에서 연속적으로 **실행되고 있는 컴퓨터 프로그램**
- 최소 하나의 스레드를 가짐
- 프로세스는 각각 독립된 메모리 영역(Code, Data, Stack, Heap의 구조)을 할당받음
- 실행 가능한 프로세스 제어 블록(Process Control Block, PCB)을 가진 프로그램
- 운영체제가 관리하는 실행 단위로, 프로세서가 할당되는 실체
  <br>
  <br>
    <img src="https://github.com/hyewon218/kim-jpa2/assets/126750615/128f345d-22a7-4b33-80e6-aa2386dd34b9" width="50%"/><br>
  <img src="https://github.com/hyewon218/kim-jpa2/assets/126750615/45b6a3ea-7437-485b-ab61-f57bea97c478" width="50%"/><br>
  - Code 영역 : 프로그램을 실행시키는 실행 파일 내의 명령어들이 올라간다. (쉽게 말하면 소스코드가 올라간다고 생각하면 됨)
  - Data 영역 : **전역변수**, **static 변수**의 할당
  - Heap 영역 : 동적할당을 위한 메모리 영역
  - Stack 영역 : **지역변수**, 함수 호출시 전달되는 인자(파라미터)를 위한 메모리 영역
  
  
## 스레드
- 프로세스 내에서 실행되는 흐름의 단위
- 하나의 프로세스는 최소 하나 이상의 스레드를 가지며, 스레드는 '경량 프로세스' 라고도 불린다.<br>
- 각 스레드는 독립된 스택 영역을 가지지만, 부모 프로세스의 코드, 데이터, 힙 영역은 공유한다.<br>
- 같은 프로세스 안에 있는 여러 스레드들은 같은 힙 공간을 공유한다. 반면에 프로세스는 다른 프로세스의 메모리에 직접 접근할 수 없다.
- 각각의 스레드는 별도의 레지스터와 스택을 갖고 있지만, 힙 메모리는 서로 읽고 쓸 수 있다.
- 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드(sibling thread)도 그 변경 결과를 즉시 볼 수 있다.

  <img src="https://github.com/hyewon218/kim-jpa2/assets/126750615/e473e2b9-965c-4f28-9b0b-38594465b93a" width="50%"/><br>

## 프로세스 스케줄링
### 스케줄링의 개념
- 메모리에 올라온 프로세스들 중 어느 프로세스를 먼저 처리할지 순서를 정하는 것이다.
- Ready Queue에 있는 프로세스들 중 CPU를 할당받을 프로세스를 결정하는 과정이다.

### 스케줄링의 목적
- 공평성
- 효율성
- 안정성
- 반응 시간 보장
- 무한 연기 방지

### 스케줄링 기법
1. 선점형 스케줄링
- 운영체제가 실행 중인 프로세스로부터 **CPU 를 강제로 빼앗을 수 있는** 방식
- CPU 처리 시간이 매우 긴 프로세스가 CPU 사용 독점을 막을 수 있어 효율적인 운영이 가능
- **오버헤드**가 많이 발생할 수 있다.
- 종류 : Round Robin, SRT, 다단계 큐, 다단계 피드백 큐 등

2. 비선점 스케줄링
- 프로세스가 CPU 를 점유하고 있다면 이를 **빼앗을 수 없는** 방식
- 공평성을 보장하고 문맥 교환 오버헤드가 적지만 처리율이 떨어질 수 있다.
- 다음에 처리해야 할 프로세스와 관계없이 응답시간을 예상할 수 있다.
- 종류 : FCFS, SJF, HRN, 우선순위, 기한부 등

3. 기아현상과 에이징 기법
- 기아현상 : 시스템에 부하가 많아서 우선순위가 낮은 프로세스가 무한정 기다리는 현상 / SJF, 우선순위, SRT, MLQ
- 에이징 기법 : 기아현상을 해결하기 위한 기법, 오랫동안 기다린 프로세스에게 우선순위를 높여주는 기법 / HRN, MLFQ

<br>

## 스케줄링 알고리즘
### 선점형 기법
#### 1. Round Robin(선입선처리)
```
시분할 시스템(Time Sharing System)을 위해 고안된 방식으로, FCFS(FIFO) 알고리즘을 선점 형태로 변형한 기법이다.
FCFS 기법과 같이 준비상태 큐에 먼저 들어온 프로세스가 먼저 CPU를 할당받지만 각 프로세스는 시간 할당량(Time Slice, Quantum)
동안만 실행한 후 실행이 완료되지 않으면 다음 프로세스에게 CPU를 넘거주고 준비상태 큐의 가장 뒤로 배치된다.
할당되는 시간의 크기가 작으면 작은 프로세스들에게 유리하다.
```
- **시간 단위**(Time Quantum 또는 Time Slice)를 정하여 프로세스에 순서대로 CPU 를 할당하는 방식
- 컴퓨터 자원을 사용할 기회를 프로세스들에게 공정하게 부여하기 위한 방법

#### 2. SRT(Shortest Remaining Time)
- 비선점형 스케줄링인 Shortest Job First(SJF) 기법을 선점 형태로 변형한 기법
- **남아 있는 실행 시간이 가장 짧은** 프로세스에 CPU 를 먼저 할당

#### 3. 다단계 큐(MLQ, Multi-Level Queue)
- 프로세스를 특정 그룹으로 분류하고, 각 그룹에 따라 다른 준비 상태 큐를 사용하는 기법
- 특정 그룹의 준비 상태 큐에 들어간 프로세스는 다른 준비 상태 큐로 이동할 수 없다.
- 하위 준비 상태 큐의 프로세스가 실행 중일 때 상위 준비 상태 큐에 프로세스가 들어오면 상위 프로세스에게 CPU를 우선 할당한다.

#### 4. 다단계 피드백 큐(MLFQ, Multi-Level Feedback Queue)
- **프로세스가 생성되면 가장 높은 우선순위의 준비 큐에 등록**되며, `FCFS` 순서로 CPU를 할당받아 실행된다.
- 할당된 시간이 끝나면 다음 단계의 준비 큐로 이동한다.
- 단계가 내려갈수록 시간 할당량이 증가하며, **가장 하위 큐**는 `Round Robin` 방식으로 운영된다.
- 적응기법을 적용하여, 프로세스의 동작에 따라 그 위치를 조정한다.

<br>

### 비선점형 기법
#### 1. FCFS
- **먼저 도착**한 프로세스를 먼저 처리하는 스케줄링 기법
- **공평성**이 유지되지만, **실행 시간이 긴 프로세스가 먼저 도착할 경우 효율성이 떨어질 수 있다**.

#### 2. SJF(Shortest Job First)
- **실행 시간이 가장 짧은 프로세스**에게 CPU 를 할당하는 기법
- **평균 대기시간을 최소화**하는 최적의 스케줄링 방법이지만, **기아 현상**이 발생할 수 있다.

#### 3. HTN(Highest Response ratio Next)-대기 시간에 힘을 준 것!
- **SJF에서의 불리함을 보완**한 스케줄링 방식
- 우선순위를 계산하여 프로세스에 순서를 부여하는 기법
- `우선순위 = (대기시간 + 실행시간) / 실행시간`
- 실행 시간이 긴 프로세스는 **대기시간이 길어질수록 우선순위가 높아진다.**

<br>

